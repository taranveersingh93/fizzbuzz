<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>FizzBuzz: By Taranveer</title>
		<link rel="icon" type="image/x-icon" href="/Logos/black icon.svg" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css" />
		<link rel="stylesheet" href="/css/prism.css" />
		<link rel="stylesheet" href="/css/site.css" />
	</head>
	<body>
		<!-- bscf-navbar-base -->
		<nav class="navbar navbar-expand-lg navbar-dark">
			<div class="container-fluid">
				<a class="navbar-brand" href="/index.html">
					<img src="/Logos/white icon.svg" height="40" />
					FizzBuzz
				</a>
				<button
					class="navbar-toggler"
					type="button"
					data-bs-toggle="collapse"
					data-bs-target="#navbarSupportedContent"
					aria-controls="navbarSupportedContent"
					aria-expanded="false"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item">
							<a class="nav-link" href="/index.html">Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/app.html">The App</a>
						</li>
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="/code.html">The Code</a>
						</li>
						<li class="nav-item">
							<!-- change to real repo link -->
							<a class="nav-link" target="_blank" href="https://github.com/taranveersingh93/fizzbuzz">The Repo</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" target="_blank" href="https://stirring-medovik-226616.netlify.app/">About</a>
						</li>
						<li class="nav-item">
							<!-- Write a blog post about the challenge -->
							<a class="nav-link" href="#">Blog</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<main class="container py-3">
			<h1 class="border-bottom border-2 border-dark">The Code</h1>
			<div class="row">
				<div class="col-12 col-lg-8">
					<!-- pre formatted text. indents and spacing will be preserved -->
					<pre class="line-numbers">
						<code class="language-js">
// Helper Functions

const getFirstFizzBuzz = (fizz, buzz) => {
	let smallerNum = buzz;
	if (buzz > fizz) {
		smallerNum = fizz;
	}

	for (let i = smallerNum; i <= fizz * buzz; i++) {
		if (i % fizz === 0 && i % buzz === 0) {
			return i;
		}
	}
}

const getClass = input => {
	if (input === "FizzBuzz") {
		return "table-primary";
	} else if (input === "Fizz") {
		return "table-light";
	} else if (input === "Buzz") {
		return "table-dark";
	} else {
		return "";
	}
}

const displayError = (error) => {
	Swal.fire(
		{
			backdrop: false,
			title: 'Oh no',
			text: error,
			icon: "error"
		}
	);
}

const checkInputValidity = (stop, fizz, buzz) => {
	const allNumbers = Number.isInteger(stop) && Number.isInteger(fizz) && Number.isInteger(buzz);
	const firstFizzBuzz = getFirstFizzBuzz(fizz, buzz);
	const minimumStop = stop >= firstFizzBuzz;
	const positiveNums = fizz > 0 && buzz > 0;
	const uniqueNums = fizz !== buzz;

	if (!allNumbers) {
		displayError("Please enter numerical values.");
	}

	if (!minimumStop) {
		displayError(`The stop value should atleast be ${firstFizzBuzz}`);
	} 

	if (!positiveNums) {
		displayError("The Fizz and Buzz value have to be greater than 0.");
	}

	if (!uniqueNums) {
		displayError("Please enter different fizz and buzz values.")
	}

	return  allNumbers && minimumStop && positiveNums && uniqueNums;
}

//DOM functions

const removeLogo = () => {
	const fizzBuzzLogo = document.querySelector('.fizzbuzz-logo');
	fizzBuzzLogo?.remove();
}

const generateFizzBuzz = (stop, fizz, buzz) => {
	const output = [];
	for (let i = 1; i <= stop; i++) {
		if (i % fizz === 0 && i % buzz === 0) {
			output.push("FizzBuzz");
		} else if (i % fizz === 0) {
			output.push("Fizz");
		} else if (i % buzz === 0) {
			output.push("Buzz");
		} else {
			output.push(i);
		}
	}
	return output;
}

const getValues = () => {
	const stopValue = parseInt(document.getElementById('stopValue').value);
	const fizzValue = parseInt(document.getElementById('fizzValue').value);
	const buzzValue = parseInt(document.getElementById('buzzValue').value);

	if (checkInputValidity(stopValue, fizzValue, buzzValue)) {  
		const generatedFizzBuzz = generateFizzBuzz(stopValue, fizzValue, buzzValue);
		let rowLength;

		if (fizzValue > buzzValue) {
			rowLength = fizzValue;
		} else {
			rowLength = buzzValue;
		}

		displayFizzBuzz(generatedFizzBuzz, rowLength);
	}
}

const displayFizzBuzz = (listFizzBuzz, rowLength) => {
	let html = '';
	for (let i = 0; i < listFizzBuzz.length; i++) {
		if (i % rowLength === 0) {
			html += '&lttr&gt';
		}
		
		const tableData = listFizzBuzz[i];
		const className = getClass(tableData);
		
		html += `&lttd class="${className}"&gt${tableData}&lt/td&gt`
		
		if (i % rowLength === rowLength - 1) {
			html += '&lt/tr&gt';
		}
	};
	removeLogo();
	const displayTable = document.getElementById('results');
	displayTable.innerHTML = html;
}

						</code>
					</pre>
				</div>
				<div class="col-12 col-lg-4">
					<p>The code is structured in one function <code>displayMessage</code>.</p>
					<p><code>displayMessage</code> displayes a sweetAlert when the button is pressed.</p>
				</div>
			</div>
		</main>

		<footer class="py-3 container-fluid">
			<div class="container">
				<div class="row align-items-center row-cols-1 row-cols-lg-3 gy-2">
					<div class="col text-center text-lg-start">&copy; 2023 Taranveer Singh</div>
					<div class="col text-center">
						<a href="https://stirring-medovik-226616.netlify.app/" target="_blank">
							<img src="/Logos/white logo.svg" height="40" />
						</a>
					</div>
					<div class="col text-center text-lg-end">
						<a target="_blank" href="https://www.linkedin.com/in/taranveersingh93/"><i class="bi bi-linkedin"></i></a>
						<a target="_blank" href="https://www.github.com/taranveersingh93/"><i class="bi bi-github"></i></a>
						<a target="_blank" href="mailTo:taranveersingh93@gmail.com"><i class="bi bi-envelope-at"></i></a>
					</div>
				</div>
			</div>
		</footer>

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
			crossorigin="anonymous"
		></script>
		<script src="/js/prism.js"></script>
		<script>
			Prism.plugins.NormalizeWhitespace.setDefaults({
				"remove-trailing": true,
				"remove-indent": true,
				"left-trim": true,
				"right-trim": true,
			});
		</script>
	</body>
</html>
